(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1638:
/*!******************************************************************!*\
  !*** ../player/components/media/video/hlsJsVideo/hlsJsVideo.tsx ***!
  \******************************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ../player/components/media/Media.tsx (referenced with import()) */function(e,t,n){"use strict";n.r(t);var p=n(/*! react */366),m=n.n(p),h=n(/*! react-redux */368),c=n(/*! hls.js */849),y=n.n(c),k=n(/*! ../../video/Video */872),g=n(/*! ../../../utils/customHooks/useMux */851),E=n(/*! ../../../utils/customHooks/useStoreSelector */369),w=n(/*! ../../../../state/playback/actions */380),_=n(/*! ../../../../state/analytics/actions */402);t.default=function(){var r=Object(h.c)(),e=Object(p.useState)(!0),c=e[0],t=e[1],n=Object(E.c)("quality"),u=Object(E.c)("audioTrack"),a=Object(E.b)("preload"),o=Object(h.d)(function(e){e=e.ui.splashScreen;return"none"!==a||!e}),i=Object(h.d)(function(e){var t=e.playback.currentChapter,e=e.config.chapters;return o?e[t].sources.hls:null}),b=Object(h.d)(function(e){var t=e.playback.paused,n=e.config,e=n.firstFrame,n=n.playlistStartOpen;return"auto"!==a&&c&&(!t||e||n)}),f=Object(p.useRef)(null),l=Object(p.useRef)(),s=Object(p.useRef)(n),e=Object(p.useState)(!1),d=e[0],j=e[1],e=Object(p.useState)(!1),O=e[0],v=e[1];return Object(p.useEffect)(function(){l.current=new y.a({autoStartLoad:"auto"===a,capLevelToPlayerSize:!0,startLevel:-1,maxBufferSize:1e6});function n(){return v(!0)}function c(){var e;j(!0),l.current&&(e=l.current.audioTracks.map(function(e){return e.name}),r(Object(w.v)(e)))}return l.current.on(y.a.Events.MEDIA_ATTACHED,n),l.current.on(y.a.Events.MANIFEST_PARSED,c),l.current.attachMedia(f.current),r(Object(_.p)("hls")),function(){var e,t;j(!1),v(!1),null!==(e=l.current)&&void 0!==e&&e.off(y.a.Events.MEDIA_ATTACHED,n),null!==(e=l.current)&&void 0!==e&&e.off(y.a.Events.MANIFEST_PARSED,c);try{null!==(t=l.current)&&void 0!==t&&t.destroy()}catch(e){if(!(e instanceof TypeError&&"listener must be a function"===e.message))throw e}r(Object(_.j)())}},[r,a]),Object(p.useEffect)(function(){var e,t,n,c;O&&i&&(t=i.find(function(e){return"auto"===e.profile})||i[0],c=(n=i.map(function(e){return e.profile})).includes(s.current)?s.current:t.profile,null!==(e=l.current)&&void 0!==e&&e.loadSource(t.url),r(Object(w.w)(n)),r(Object(w.D)(c)))},[O,i,r]),Object(p.useEffect)(function(){var e;d&&l.current&&(e=null===(e=l.current)||void 0===e?void 0:e.levels.findIndex(function(e){return e.height+"p"===n}),l.current.currentLevel=e)},[d,n]),Object(p.useEffect)(function(){d&&l.current&&(l.current.audioTrack=u)},[d,u]),Object(p.useEffect)(function(){var e;b&&(null!==(e=l.current)&&void 0!==e&&e.startLoad(),t(!1))},[b]),Object(g.a)(f,l),m.a.createElement(k.a,{ref:f})}},850:
/*!***************************************************!*\
  !*** ../player/components/media/video/Video.scss ***!
  \***************************************************/
/*! no static exports found */
/*! exports used: hideCursor, hideVideo, video */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){e.exports={video:"_1l-KU",hideCursor:"_3OgU3",hideVideo:"_3-9KU"}},851:
/*!********************************************************!*\
  !*** ../player/components/utils/customHooks/useMux.ts ***!
  \********************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var i=n(/*! react */366),b=n(/*! react-redux */368),f=n(/*! ../../utils/customHooks/useStoreSelector */369),c=n(/*! mux-embed */965),l=n.n(c),c=n(/*! hls.js */849),s=n.n(c);t.a=function(t,n){var c=Object(f.a)("visitorId"),r=Object(f.b)("playerUuid"),u=Object(f.b)("accountId"),a=Object(b.d)(function(e){return e.config.chapters[e.playback.currentChapter].videoId}),o=Object(b.d)(function(e){var t=e.config,e=t.onComplete,t=t.chapterLoop;return"loop"===e||!!t});Object(i.useEffect)(function(){var e=!o&&Math.floor(100*Math.random())<=15;t.current&&(void 0===n||n.current)&&e&&l.a.monitor("."+t.current.classList[0],{debug:!1,disableCookies:!0,hlsjs:n?n.current:void 0,Hls:n?s.a:void 0,data:{env_key:"vfhbo3jsnvrutdkuee1akd0lj",player_name:"Pomo Player",player_init_time:window.__startTime,player_version:"c8ba87502ffc85ac63665b4e291d64bceb9e962d",video_id:a,video_series:r,video_title:a,video_stream_type:"on-demand",viewer_user_id:c,page_type:window.location!==window.parent.location?"iframe":"watchpage",sub_property_id:u}})},[t,u,a,r,n,c,o])}},872:
/*!**************************************************************!*\
  !*** ../player/components/media/video/Video.tsx + 3 modules ***!
  \**************************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/autoplayPermission.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/usePostRoll.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/usePrevious.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/useShouldRenderCaptions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/useStoreSelector.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/userBrowserChecker/UserBrowserChecker.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/state/playback/actions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/state/ui/actions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/state/ui/thunks.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/classnames/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/media/video/Video.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-redux/es/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../player/node_modules/unfetch/dist/unfetch.mjs */function(e,t,n){"use strict";var K=n(366),V=n.n(K),W=n(368),c=n(371),G=n.n(c),Q=n(608),X=n(369),Y=n(401),Z=n(380),$=n(373),ee=n(672),o=n(132);function i(e){return"track-"+e.id}function te(){var r=Object(W.d)(function(e){var t=e.playback.currentChapter;return e.config.chapters[t].captions}),u=Object(W.d)(function(e){e=e.config.userBrowser;return Object(Y.d)(e)}),e=Object(K.useState)({}),t=e[0],a=e[1];return Object(K.useEffect)(function(){for(var c={},e=0,t=r;e<t.length;e++)!function(t){u?Object(o.a)(t.vttUrl,{method:"GET"}).then(function(e){return e.blob()}).then(function(e){c[i(t)]=URL.createObjectURL(e)}):c[i(t)]=t.vttUrl}(t[e]);return a(c),function(){if(u)for(var e=0,t=r;e<t.length;e++){var n=t[e];URL.revokeObjectURL(c[i(n)]),a({})}}},[r,u]),V.a.createElement(V.a.Fragment,null,r.map(function(e){return V.a.createElement("track",{id:i(e),key:e.id,kind:"captions",label:e.name,srcLang:e.language,src:t[i(e)]})}))}var b=n(670);function ne(c){var r=Object(W.c)(),u=Object(X.c)("canPlay"),a=Object(X.c)("caption"),o=Object(b.a)();Object(K.useEffect)(function(){var e;if(u){var n=null===(e=c.current)||void 0===e?void 0:e.textTracks;if(n)for(var t=0;t<n.length;t++)!function(e){var t=n[e];o&&null!==a&&t.id===i(a)?(t.oncuechange=function(){var e=Array.from(t.activeCues);r(Object(Z.b)(e))},t.mode="hidden"):"disabled"!==t.mode&&(t.mode="disabled")}(t)}},[a,o,u,r,c])}var ce=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var c=Array(e),r=0,t=0;t<n;t++)for(var u=arguments[t],a=0,o=u.length;a<o;a++,r++)c[r]=u[a];return c};var re=n(850),ue=n(434),ae=n(510);t.a=Object(K.forwardRef)(function(t,e){var a=Object(W.c)(),n=Object(X.b)("pauseDisabled"),c=Object(X.b)("chapterLoop"),r=Object(X.b)("redirectWholePage"),u=Object(X.b)("redirectUrl"),o=Object(X.b)("disableRedirect"),i=Object(X.b)("onComplete"),b=Object(X.b)("background"),f=Object(X.b)("userBrowser"),l=Object(X.b)("disableCtas"),s=Object(X.b)("preload"),d=Object(X.b)("autoplay"),j=Object(X.c)("currentChapter"),O=Object(X.c)("paused"),v=Object(X.c)("mute"),p=Object(X.c)("seekTo"),m=Object(X.c)("seekFrom"),h=Object(X.c)("speed"),y=Object(X.c)("volume"),k=Object(X.c)("canPlay"),g=Object(X.c)("time"),E=Object(X.d)("splashScreen"),w=Object(X.d)("userActive"),_=Object(ue.a)(),T=Object(K.useState)(!0),C=T[0],S=T[1],A=Object(W.d)(function(e){var t=e.playback.currentChapter;return e.config.chapters[t].name}),P=Object(W.d)(function(e){return e.playback.currentChapter===e.config.chapters.length-1}),T=Object(W.d)(function(e){var t=e.ui,e=t.userActive,t=t.controlsLocked;return!e&&!t}),R=Object(W.d)(function(e){var t=e.ui.playerDimensions;return e.playback.duration/t.width}),L=Object(W.d)(function(e){return!(null===(e=e.ui.eventState[null==_?void 0:_.id])||void 0===e||!e.playDisabled)}),D=Object(W.d)(function(e){return null===(e=e.ui.eventState[null==_?void 0:_.id])||void 0===e?void 0:e.dismissed}),U=Object(ae.a)(D),I=_&&"vyFreePostRoll"===_.eventType,F=Object(K.useRef)(null),x=Object(K.useRef)(O),H=Object(K.useRef)(),M=Object(K.useRef)();Object(K.useImperativeHandle)(e,function(){return F.current});var B={start:function(){F.current&&(Math.abs(F.current.currentTime-g)>=R&&a(Object(Z.H)(F.current.currentTime)),H.current=window.requestAnimationFrame(function(){var e;return null===(e=M.current)||void 0===e?void 0:e.start()}))},stop:function(){null!=H.current&&cancelAnimationFrame(H.current),H.current=void 0}};Object(K.useEffect)(function(){M.current=B},[B]);var q=Object(K.useCallback)(function(){var e;k&&(O?null!==(e=F.current)&&void 0!==e&&e.pause():(e=null===(e=F.current)||void 0===e?void 0:e.play())instanceof Promise?e.catch(function(){!x.current&&F.current&&F.current.paused&&!F.current.muted&&2!==d?a(Object(Z.l)()):2===d&&C&&(a(Object(Z.j)()),a(Object($.B)()))}).finally(function(){S(!1)}):S(!1))},[k,O,d,C,a]);Object(K.useEffect)(function(){0<d&&!E&&a(Object(Z.k)())},[d,E,a]),Object(K.useEffect)(function(){q()},[q]),Object(K.useEffect)(function(){x.current=O},[O]),Object(K.useEffect)(function(){F.current&&(F.current.muted=v)},[v]),Object(K.useEffect)(function(){var e;null!==(e=F.current)&&void 0!==e&&e.paused&&!O&&v&&q()},[v,O,q]),Object(K.useEffect)(function(){k&&0<=p&&F.current&&p<=F.current.duration&&(Number.isFinite(p)&&(F.current.currentTime=p,a(Object(Z.H)(p))),a(Object(Z.r)()))},[k,p,a]),Object(K.useEffect)(function(){F.current&&(F.current.volume=y)},[y]),Object(K.useEffect)(function(){k&&F.current&&(F.current.playbackRate=h)},[k,h]),Object(K.useEffect)(function(){return function(){a(Object(Z.y)(!1))}},[a]);var N,z,J=Object(K.useCallback)(function(){if(c)return a(Object(Z.h)()),a(Object(Z.a)()),void q();if(!P)return a(Object(Z.t)(j+1)),void a(Object(Z.a)());switch(a(Object(Z.m)()),a(Object(ee.b)(0)),i){case"redirect_url":o?(a(Object($.B)()),a(Object($.q)(!1)),a(Object(Z.o)()),a(Object(Z.a)())):(r?window.top:window).location.replace(u);break;case"final_frame":a(Object(Z.j)()),a(Object($.q)(!1));break;case"loop":a(Object(Z.i)()),a(Object(Z.a)()),q();break;case"splash_screen":a(Object($.B)()),a(Object($.q)(!1)),a(Object(Z.o)()),a(Object(Z.a)())}},[c,j,a,P,i,u,r,o,q]);Object(K.useEffect)(function(){L||!1!==U||!D||I||J()},[J,L,D,U,I]),Object(K.useEffect)(function(){a(Object(ee.c)(j))},[j,a]),ne(F),N=Object(X.b)("pauseDisabled"),z=Object(X.b)("hiddenControls"),Object(K.useEffect)(function(){if(navigator.mediaSession){var e=N||z?[]:[["play",null],["pause",null],["stop",null],["seekbackward",null],["seekforward",null],["seekto",null]];N&&(e=ce(e,[["play",function(){}],["stop",function(){}],["pause",function(){}]]));for(var t=0,n=e=z?ce(e,[["seekbackward",function(){}],["seekforward",function(){}],["seekto",function(){}]]):e;t<n.length;t++){var c=n[t],r=c[0],c=c[1];try{navigator.mediaSession.setActionHandler(r,c)}catch(e){}}}},[N,z]);e=G()(re.video,((e={})[re.hideCursor]=T,e[re.hideVideo]=E,e));return V.a.createElement("video",{"aria-label":A,preload:s,crossOrigin:"anonymous",ref:F,className:e,style:{backgroundColor:b},playsInline:!0,onDurationChange:function(){F.current&&isFinite(F.current.duration)&&a(Object(Z.e)(F.current.duration))},onTimeUpdate:function(){-1===p&&F.current&&a(Object(Z.H)(F.current.currentTime))},onContextMenu:function(e){e.preventDefault()},onClick:function(){var e;(Object(Y.h)(f)||Object(Y.f)(f))&&Object(Q.a)(),n||a((O?Object(Z.k):Object(Z.j))()),null!==(e=F.current)&&void 0!==e&&e.focus()},onEnded:function(){B.stop(),!l&&_||J()},onPause:function(){var e;n?null!==(e=F.current)&&void 0!==e&&e.play():B.stop()},onPlay:function(){O||a(Object(Z.k)()),B.start()},onCanPlayThrough:function(){a(Object(Z.x)(!1))},onCanPlay:function(){a(Object(Z.y)(!0))},onSeeked:function(){m!==p&&a(Object(ee.b)(g))},onProgress:function(){if(F.current)for(var e=F.current,t=e.buffered,n=e.currentTime,c=e.duration,r=0;r<t.length;r++)if(t.start(t.length-1-r)<n){var u=t.end(t.length-1-r)/c;a(Object(Z.A)(u));break}},onWaiting:function(){a(Object(Z.x)(!0))},onPlaying:function(){var e;a(Object(Z.x)(!1)),null!==(e=t.onPlaying)&&void 0!==e&&e.call(t)},onLoadedData:function(){var e;null!==F.current&&0<F.current.currentTime&&(F.current.currentTime=0,a(Object(Z.H)(0))),null!==(e=t.onLoadedData)&&void 0!==e&&e.call(t)},"data-testid":"video",tabIndex:w?-1:0},V.a.createElement(te,null))})}}]);